"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[646],{3646:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(7294),o=n(3935),r=n(3457),l=n(3006),s=n(5834),c=n(1749),m=n(2318),i=n(7497),u=n(282),h=n(8623),d=n(6083),p=n(9525),E=n(6856),Z=n(5477);const f=e=>{const[t,f]=(0,a.useState)(!1),[g,y]=(0,a.useState)(!1),[C,S]=(0,a.useState)(),[k,b]=(0,a.useState)(e.match.params.roomCode),[P,x]=(0,a.useState)(),[v,T]=(0,a.useState)(!0),[w,N]=(0,a.useState)(!1),[j,R]=(0,a.useState)(),[$,_]=(0,a.useState)(!k),[O,z]=(0,a.useState)(),[L,A]=(0,a.useState)();(0,a.useEffect)((()=>{J()}),[v]);const J=()=>{fetch("/api/get-room?code="+k).then((e=>e.ok?e.json():{status:e.status})).then((e=>{e.already_host?(z(e.already_host),A()):400==e.status||403==e.status||404==e.status||301==e.status?(N(!1),A(e.status)):(A(),S(e.name),f(e.is_host),y(e.is_locked),N(!0))})).catch((e=>console.log(e)))},K=e=>{if(""==C||""==C||null===C)x("This field cannot be left blank"),T(!0);else{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:C})};fetch("/api/update-name/?code="+k,e).then((e=>e.json())).then((e=>{"present"==e.same_name?x("Someone in the room already picked this name..."):e.bad_request?A(400):e.expired?A(301):T(!1)}))}};if($)return a.createElement(r.Z,{theme:l.$},a.createElement(s.ZP,null),a.createElement(c.Z,{container:!0,spacing:3,justifyContent:"center"},a.createElement(c.Z,{container:!0,spacing:1},a.createElement(c.Z,{item:!0,xs:12,align:"center"},a.createElement(m.Z,{component:"h1",variant:"h2"},"Room Code"))),a.createElement(c.Z,{container:!0,spacing:2,align:"center"},a.createElement(i.Z,{align:"center",inputProps:{min:0,maxLength:7,style:{textAlign:"center",textTransform:"uppercase"}},autoComplete:"off",onKeyPress:t=>{3==t.target.value.length&&b((e=>e+"-")),"Enter"!==t.code&&"NumpadEnter"!==t.code||(k?(A(),_(!1),J(),e.history.push("/room/"+k)):R("Please Enter the Room Code"))},error:j,autoFocus:!0,margin:"dense",id:"code",value:k,helperText:j,onChange:e=>{b(e.target.value)},type:"code",fullWidth:!0})),a.createElement(c.Z,{item:!0,xl:12},a.createElement(u.Z,{size:"medium",color:"primary",variant:"contained",onClick:()=>{k?(A(),_(!1),J(),e.history.push("/room/"+k)):R("Please Enter the Room Code")}},"Join The Room"))));if(O)return a.createElement(r.Z,{theme:l.$},a.createElement(s.ZP,null),a.createElement(c.Z,{container:!0,spacing:1,align:"center"},a.createElement(c.Z,{item:!0,xs:12},a.createElement(m.Z,{component:"h4",variant:"h4"},"Already host of: ",O)),a.createElement(c.Z,{item:!0,xs:12,spacing:3},a.createElement(u.Z,{size:"large",color:"primary",variant:"contained",onClick:()=>{e.history.push("/room/"+O),z()}},"Go to that Room"),a.createElement(u.Z,{size:"large",onClick:()=>{(()=>{const e={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({})};fetch("/api/delete-room/",e).then((e=>e.json())).then((e=>{setIsActive(!1),setOpen(!1)}))})(),window.location.reload(!1)},color:"secondary"},"Destroy Room"))));if(L){if(404!=L)return a.createElement(r.Z,{theme:l.$},a.createElement(s.ZP,null),a.createElement(m.Z,{component:"h2",variant:"h2"},403==L&&"Looks like the room has been locked by the host!",301==erroStatus&&"This room has expired and will be deleted soon",403!=L&&301!=L&&"Something went wrong..."));_(!0),R("No such room exists...")}if(w&&v)return a.createElement(r.Z,{theme:l.$},a.createElement(s.ZP,null),a.createElement(h.Z,{open:v,"aria-labelledby":"form-dialog-title"},a.createElement(d.Z,{id:"form-dialog-title"}," Enter your name "),a.createElement(p.Z,null,a.createElement(i.Z,{autoComplete:"off",inputProps:{maxLength:20},autoFocus:!0,onKeyPress:e=>{"Enter"!==e.code&&"NumpadEnter"!==e.code||K()},error:P,margin:"dense",id:"name",helperText:P,onChange:e=>S(e.target.value),value:C,label:"Name",type:"name",fullWidth:!0})),a.createElement(E.Z,null,a.createElement(u.Z,{onClick:K,color:"primary"},"OK!"))));if(w&&!v){const e=a.lazy((()=>Promise.all([n.e(116),n.e(837)]).then(n.bind(n,7860)))),c=document.getElementById("app");(0,o.render)(a.createElement(r.Z,{theme:l.$},a.createElement(s.ZP,null),a.createElement(a.Suspense,{fallback:a.createElement(Z.Z,{className:"center"})},a.createElement(e,{roomCode:k,isHost:t,isLocked:g,name:C}))),c)}return a.createElement(r.Z,{theme:l.$},a.createElement(s.ZP,null),a.createElement(Z.Z,null))}}}]);