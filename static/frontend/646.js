"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[646],{3646:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(7294),o=n(3935),r=n(3457),l=n(3006),s=n(5834),c=n(1749),m=n(2318),i=n(7497),u=n(282),d=n(8623),h=n(6083),p=n(9525),E=n(6856),Z=n(5477);const f=e=>{const[t,f]=(0,a.useState)(!1),[y,g]=(0,a.useState)(!1),[S,C]=(0,a.useState)(),[k,b]=(0,a.useState)(e.match.params.roomCode),[P,v]=(0,a.useState)(),[x,T]=(0,a.useState)(!0),[w,N]=(0,a.useState)(!1),[R,j]=(0,a.useState)(),[$,_]=(0,a.useState)(!k),[O,z]=(0,a.useState)(),[A,J]=(0,a.useState)();(0,a.useEffect)((()=>{K()}),[x]);const K=()=>{fetch("/api/get-room?code="+k).then((e=>e.ok?e.json():{status:e.status})).then((e=>{e.already_host?(z(e.already_host),J()):400==e.status||403==e.status||404==e.status||301==e.status?(N(!1),J(e.status)):(J(),C(e.name),f(e.is_host),g(e.is_locked),N(!0))})).catch((e=>console.log(e)))},L=e=>{if(""==S||""==S||null===S)v("This field cannot be left blank"),T(!0);else{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:S})};fetch("/api/update-name/?code="+k,e).then((e=>e.json())).then((e=>{"present"==e.same_name?v("Someone in the room already picked this name..."):e.bad_request?J(400):e.expired?J(301):T(!1)}))}};if($)return a.createElement(r.Z,{theme:l.$},a.createElement(s.ZP,null),a.createElement(c.Z,{container:!0,spacing:3,justifyContent:"center"},a.createElement(c.Z,{container:!0,spacing:1},a.createElement(c.Z,{item:!0,xs:12,align:"center"},a.createElement(m.Z,{component:"h1",variant:"h2"},"Room Code"))),a.createElement(c.Z,{container:!0,spacing:2,align:"center"},a.createElement(i.Z,{align:"center",inputProps:{min:0,style:{textAlign:"center"}},autoComplete:"off",onKeyPress:t=>{"Enter"!==t.code&&"NumpadEnter"!==t.code||(k?(J(),_(!1),K(),e.history.push("/room/"+k)):j("Please Enter the Room Code"))},error:R,autoFocus:!0,margin:"dense",id:"code",value:k,helperText:R,onChange:e=>{b(e.target.value)},type:"code",fullWidth:!0})),a.createElement(c.Z,{item:!0,xl:12},a.createElement(u.Z,{size:"medium",color:"primary",variant:"contained",onClick:()=>{k?(J(),_(!1),K(),e.history.push("/room/"+k)):j("Please Enter the Room Code")}},"Join The Room"))));if(O)return a.createElement(r.Z,{theme:l.$},a.createElement(s.ZP,null),a.createElement(c.Z,{container:!0,spacing:1,align:"center"},a.createElement(c.Z,{item:!0,xs:12},a.createElement(m.Z,{component:"h4",variant:"h4"},"Already host of: ",O)),a.createElement(c.Z,{item:!0,xs:12,spacing:3},a.createElement(u.Z,{size:"large",color:"primary",variant:"contained",onClick:()=>{e.history.push("/room/"+O),z()}},"Go to that Room"),a.createElement(u.Z,{size:"large",onClick:()=>{(()=>{const e={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({})};fetch("/api/delete-room/",e).then((e=>e.json())).then((e=>{setIsActive(!1),setOpen(!1)}))})(),window.location.reload(!1)},color:"secondary"},"Destroy Room"))));if(A){if(404!=A)return a.createElement(r.Z,{theme:l.$},a.createElement(s.ZP,null),a.createElement(m.Z,{component:"h2",variant:"h2"},403==A&&"Looks like the room has been locked by the host!",301==erroStatus&&"This room has expired and will be deleted soon",403!=A&&301!=A&&"Something went wrong..."));_(!0),j("No such room exists. Tip: Room Codes are CaSe SenSiTive")}if(w&&x)return a.createElement(r.Z,{theme:l.$},a.createElement(s.ZP,null),a.createElement(d.Z,{open:x,"aria-labelledby":"form-dialog-title"},a.createElement(h.Z,{id:"form-dialog-title"}," Enter your name "),a.createElement(p.Z,null,a.createElement(i.Z,{inputProps:{maxLength:20},autoFocus:!0,onKeyPress:e=>{"Enter"!==e.code&&"NumpadEnter"!==e.code||L()},error:P,margin:"dense",id:"name",helperText:P,onChange:e=>C(e.target.value),value:S,label:"Name",type:"name",fullWidth:!0})),a.createElement(E.Z,null,a.createElement(u.Z,{onClick:L,color:"primary"},"OK!"))));if(w&&!x){const e=a.lazy((()=>Promise.all([n.e(85),n.e(837)]).then(n.bind(n,7860)))),c=document.getElementById("app");(0,o.render)(a.createElement(r.Z,{theme:l.$},a.createElement(s.ZP,null),a.createElement(a.Suspense,{fallback:a.createElement(Z.Z,{className:"center"})},a.createElement(e,{roomCode:k,isHost:t,isLocked:y,name:S}))),c)}return a.createElement(r.Z,{theme:l.$},a.createElement(s.ZP,null),a.createElement(Z.Z,null))}}}]);