/*! For license information please see src_components_RoomComponents_JoinRoom_js.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["src_components_RoomComponents_JoinRoom_js"],{"./src/components/RoomComponents/JoinRoom.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ "./node_modules/react-dom/index.js");\n/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material-ui/core/styles */ "./node_modules/@material-ui/styles/esm/ThemeProvider/ThemeProvider.js");\n/* harmony import */ var _CustomTheme__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../CustomTheme */ "./src/components/CustomTheme.js");\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @material-ui/core */ "./node_modules/@material-ui/core/esm/CssBaseline/CssBaseline.js");\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @material-ui/core */ "./node_modules/@material-ui/core/esm/Grid/Grid.js");\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @material-ui/core */ "./node_modules/@material-ui/core/esm/Typography/Typography.js");\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @material-ui/core */ "./node_modules/@material-ui/core/esm/TextField/TextField.js");\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @material-ui/core */ "./node_modules/@material-ui/core/esm/Button/Button.js");\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @material-ui/core */ "./node_modules/@material-ui/core/esm/Dialog/Dialog.js");\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @material-ui/core */ "./node_modules/@material-ui/core/esm/DialogTitle/DialogTitle.js");\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @material-ui/core */ "./node_modules/@material-ui/core/esm/DialogContent/DialogContent.js");\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @material-ui/core */ "./node_modules/@material-ui/core/esm/DialogActions/DialogActions.js");\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @material-ui/core */ "./node_modules/@material-ui/core/esm/CircularProgress/CircularProgress.js");\n\n\n\n\n\n\nconst JoinRoom = props => {\n  const [isHost, setIsHost] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [isLocked, setIsLocked] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [name, setName] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const [roomCode, setRoomCode] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(props.match.params.roomCode);\n  const [nameValidator, setNameValidator] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const [noName, setNoName] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true); //Related To fetching and handling room code\n\n  const [roomValidated, setRoomValidated] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [roomError, setRoomError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const [noRoom, setNoRoom] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)( true ? !roomCode : 0);\n  const [isAlreadyHost, setIsAlreadyHost] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const [errorStatus, setErrorStatus] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    getRoomDetails();\n  }, [noName]);\n\n  const getRoomDetails = () => {\n    fetch("/api/get-room" + "?code=" + roomCode).then(response => {\n      if (!response.ok) {\n        return {\n          \'status\': response.status\n        };\n      } else {\n        return response.json();\n      }\n    }).then(data => {\n      if (data.already_host) {\n        setIsAlreadyHost(data.already_host);\n        setErrorStatus();\n      } else if (data.status == 400 || data.status == 403 || data.status == 404 || data.status == 301) {\n        setRoomValidated(false);\n        setErrorStatus(data.status);\n      } else {\n        setErrorStatus();\n        setName(data.name);\n        setIsHost(data.is_host);\n        setIsLocked(data.is_locked);\n        setRoomValidated(true);\n      }\n    }).catch(data => console.log(data));\n  };\n\n  const destroyRoom = () => {\n    const requestOptions = {\n      method: "PUT",\n      headers: {\n        "Content-Type": "application/json"\n      },\n      body: JSON.stringify({})\n    };\n    fetch("/api/delete-room/", requestOptions).then(response => response.json()).then(data => {\n      setIsActive(false);\n      setOpen(false);\n    });\n  };\n\n  const onButtonPressed = e => {\n    if (name == \'\' || name == "" || name === null) {\n      setNameValidator("This field cannot be left blank");\n      setNoName(true);\n    } else {\n      const requestOptions = {\n        method: "POST",\n        headers: {\n          "Content-Type": "application/json"\n        },\n        body: JSON.stringify({\n          name: name\n        })\n      };\n      fetch("/api/update-name/?code=" + roomCode, requestOptions).then(response => response.json()).then(response => {\n        if (response.same_name == "present") {\n          setNameValidator("Someone in the room already picked this name...");\n        } else if (response.bad_request) {\n          setErrorStatus(400);\n        } else if (response.expired) {\n          setErrorStatus(301);\n        } else {\n          setNoName(false);\n        }\n      });\n    }\n  };\n\n  const handleKeyPress = event => {\n    if (event.code === "Enter" || event.code === "NumpadEnter") {\n      onButtonPressed(event);\n    }\n  };\n\n  const handleJoinKeyPress = event => {\n    if (event.code === "Enter" || event.code === "NumpadEnter") {\n      if (!roomCode) {\n        setRoomError("Please Enter the Room Code");\n      } else {\n        setErrorStatus();\n        setNoRoom(false);\n        getRoomDetails();\n        props.history.push("/room/" + roomCode);\n      }\n    }\n  };\n\n  if (noRoom) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_3__.default, {\n      theme: _CustomTheme__WEBPACK_IMPORTED_MODULE_2__.darkTheme\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__.default, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__.default, {\n      container: true,\n      spacing: 3,\n      justifyContent: "center"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__.default, {\n      container: true,\n      spacing: 1\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__.default, {\n      item: true,\n      xs: 12,\n      align: "center"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.default, {\n      component: "h1",\n      variant: "h2"\n    }, "Room Code"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__.default, {\n      container: true,\n      spacing: 2,\n      align: "center"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_7__.default, {\n      align: "center",\n      inputProps: {\n        min: 0,\n        style: {\n          textAlign: \'center\'\n        }\n      },\n      autoComplete: "off",\n      onKeyPress: handleJoinKeyPress,\n      error: roomError,\n      autoFocus: true,\n      margin: "dense",\n      id: "code",\n      value: roomCode,\n      helperText: roomError,\n      onChange: e => {\n        setRoomCode(e.target.value);\n      },\n      type: "code",\n      fullWidth: true\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__.default, {\n      item: true,\n      xl: 12\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__.default, {\n      size: "medium",\n      color: "primary",\n      variant: "contained",\n      onClick: () => {\n        if (!roomCode) {\n          setRoomError("Please Enter the Room Code");\n        } else {\n          setErrorStatus();\n          setNoRoom(false);\n          getRoomDetails();\n          props.history.push("/room/" + roomCode);\n        }\n      }\n    }, "Join The Room"))));\n  }\n\n  if (isAlreadyHost) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_3__.default, {\n      theme: _CustomTheme__WEBPACK_IMPORTED_MODULE_2__.darkTheme\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__.default, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__.default, {\n      container: true,\n      spacing: 1,\n      align: "center"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__.default, {\n      item: true,\n      xs: 12\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.default, {\n      component: "h4",\n      variant: "h4"\n    }, "Already host of: ", isAlreadyHost)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__.default, {\n      item: true,\n      xs: 12,\n      spacing: 3\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__.default, {\n      size: "large",\n      color: "primary",\n      variant: "contained",\n      onClick: () => {\n        props.history.push("/room/" + isAlreadyHost);\n        setIsAlreadyHost();\n      }\n    }, "Go to that Room"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__.default, {\n      size: "large",\n      onClick: () => {\n        destroyRoom();\n        window.location.reload(false);\n      },\n      color: "secondary"\n    }, "Destroy Room"))));\n  }\n\n  if (errorStatus) {\n    if (errorStatus == 404) {\n      setNoRoom(true);\n      setRoomError("No such room exists. Tip: Room Codes are CaSe SenSiTive");\n    } else {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_3__.default, {\n        theme: _CustomTheme__WEBPACK_IMPORTED_MODULE_2__.darkTheme\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__.default, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.default, {\n        component: "h2",\n        variant: "h2"\n      }, errorStatus == 403 && "Looks like the room has been locked by the host!", erroStatus == 301 && "This room has expired and will be deleted soon", errorStatus != 403 && errorStatus != 301 && "Something went wrong..."));\n    }\n  }\n\n  if (roomValidated) {\n    if (noName) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_3__.default, {\n        theme: _CustomTheme__WEBPACK_IMPORTED_MODULE_2__.darkTheme\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__.default, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_9__.default, {\n        open: noName,\n        "aria-labelledby": "form-dialog-title"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_10__.default, {\n        id: "form-dialog-title"\n      }, " Enter your name "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_11__.default, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_7__.default, {\n        autoComplete: "off",\n        inputProps: {\n          maxLength: 20\n        },\n        autoFocus: true,\n        onKeyPress: handleKeyPress,\n        error: nameValidator,\n        margin: "dense",\n        id: "name",\n        helperText: nameValidator,\n        onChange: e => setName(e.target.value),\n        value: name,\n        label: "Name",\n        type: "name",\n        fullWidth: true\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_12__.default, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__.default, {\n        onClick: onButtonPressed,\n        color: "primary"\n      }, "OK!"))));\n    }\n  }\n\n  if (roomValidated && !noName) {\n    const Room = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.lazy(() => Promise.all(/*! import() */[__webpack_require__.e("vendors-node_modules_material-ui_core_esm_Avatar_Avatar_js-node_modules_material-ui_core_esm_-563431"), __webpack_require__.e("src_components_RoomComponents_Room_js-node_modules_moment_locale_sync_recursive_")]).then(__webpack_require__.bind(__webpack_require__, /*! ./Room */ "./src/components/RoomComponents/Room.js")));\n    const appDiv = document.getElementById("app");\n    (0,react_dom__WEBPACK_IMPORTED_MODULE_1__.render)( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_3__.default, {\n      theme: _CustomTheme__WEBPACK_IMPORTED_MODULE_2__.darkTheme\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__.default, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Suspense, {\n      fallback: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__.default, {\n        className: "center"\n      })\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(Room, {\n      roomCode: roomCode,\n      isHost: isHost,\n      isLocked: isLocked,\n      name: name\n    }))), appDiv);\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_3__.default, {\n    theme: _CustomTheme__WEBPACK_IMPORTED_MODULE_2__.darkTheme\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__.default, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__.default, null));\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (JoinRoom);\n\n//# sourceURL=webpack://frontend/./src/components/RoomComponents/JoinRoom.js?')}}]);